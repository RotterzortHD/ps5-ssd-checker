---
// src/pages/ssd/[slug].astro

import Layout from '../../layouts/Layout.astro';
import CompatibilityCheck from '../../components/CompatibilityCheck.astro';
import PriceCheck from '../../components/PriceCheck.astro';
import TechSpecs from '../../components/TechSpecs.astro';
import ssdsData from '../../data/ssds.json';

// Diese Funktion sagt Astro, welche Seiten es bauen soll (für jede SSD eine)
export async function getStaticPaths() {
  return ssdsData.map((ssd) => ({
    params: { slug: ssd.id },
    props: { ssd },
  }));
}

// Hier holen wir uns die Daten der aktuellen SSD
const { ssd } = Astro.props;

// --- SEO AUTOMATISIERUNG ---
// Wir bauen uns dynamische Titel und Beschreibungen für Google
const currentYear = new Date().getFullYear();

const seoTitle = `${ssd.name} für PS5: Kompatibilität & Test (${currentYear})`;

const seoDesc = `Passt die ${ssd.name} in die PS5? Wir prüfen die Geschwindigkeit (${ssd.read_speed_mb_s} MB/s) und ob der Heatsink passt. Erfahre jetzt, ob du sie kaufen solltest.`;
---

<Layout title={seoTitle} description={seoDesc}>
  
  <main class="max-w-4xl mx-auto px-4 py-12">
    
    <nav class="mb-8">
      <a 
        href="/" 
        class="inline-flex items-center text-sm font-medium text-slate-400 hover:text-white transition-colors"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
        </svg>
        Zurück zur Übersicht
      </a>
    </nav>

    <header class="mb-12">
      <div class="text-xs font-bold text-indigo-500 mb-3 uppercase tracking-widest">
        Hardware / Storage / Check
      </div>
      <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-4 tracking-tight">
        {ssd.name}
      </h1>
      <p class="text-xl text-slate-300 max-w-2xl leading-relaxed">
        Passt die <strong class="text-white">{ssd.brand}</strong> SSD in den Erweiterungsslot deiner PlayStation 5? Wir machen den Check.
      </p>
    </header>

    <div class="space-y-12">
      
      <CompatibilityCheck ssd={ssd} />
      
      <PriceCheck ssd={ssd} />
      
      <TechSpecs ssd={ssd} />
      
    </div>



  </main>

  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org/",
    "@type": "Product",
    "name": ssd.name,
    "image": "", // Hier könnte später eine Bild-URL rein
    "description": seoDesc,
    "brand": {
      "@type": "Brand",
      "name": ssd.brand
    },
    "review": {
      "@type": "Review",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "4.8", 
        "bestRating": "5"
      },
      "author": {
        "@type": "Organization",
        "name": "Konsolen SSD Check"
      }
    }
  })} />

</Layout>